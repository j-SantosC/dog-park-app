<h2 class="title">Profile</h2>
<div class="container">
	<div *ngIf="!loading" class="profile-container">
		<div class="title-wrapper">
			<span>Me</span>
			<app-button *ngIf="userInfo" [isSmall]="true" (onClick)="onEditUserInfo()"> {{ !edit ? 'Edit' : 'Save' }}</app-button>
		</div>

		<div *ngIf="!userInfo && !edit" class="complete-info">
			<span>Complete user info now</span>
			<app-button (onClick)="edit = true" [isSmall]="true">Add info</app-button>
		</div>

		<div *ngIf="userInfo && !edit" class="info-container">
			<app-upload-image [imgSrc]="imageSrc" (loading)="(loading)" (formData)="this.uploadProfileImage($event)"></app-upload-image>
			<div class="info-wrapper">
				<span>
					<span class="label">Name</span>
					<span class="value">{{ userInfo.name }}</span>
				</span>
				<span>
					<span class="label">Lastname</span>
					<span class="value">{{ userInfo.lastname }}</span>
				</span>
				<span>
					<span class="label">Email</span>
					<span class="value">{{ user?.email }}</span>
				</span>
				<span>
					<span class="label">Birthdate</span>
					<span class="value">{{ userInfo.birthdate }}</span>
				</span>
			</div>
		</div>
		<div *ngIf="edit" class="form-container">
			<form *ngIf="userForm" [formGroup]="userForm" (ngSubmit)="onSubmit()">
				<label>Name:</label>
				<input formControlName="name" type="text" />

				<label>Last Name:</label>
				<input formControlName="lastname" type="text" />

				<label>Email:</label>
				<input formControlName="email" type="email" />

				<label>Birthdate:</label>
				<input formControlName="birthdate" type="date" />

				<button type="submit">Submit</button>
			</form>
		</div>
	</div>
	<div *ngIf="userDogs.length > 0 && !newDog && !editDog" class="dog-container">
		<div class="title-wrapper">
			<span>My dogs</span>
		</div>
		<div class="dog-wrapper">
			<div *ngFor="let dog of userDogs" class="dog">
				<app-button *ngIf="userInfo" [isSmall]="true" (onClick)="onEditDog(dog.id)"> {{ !editDog ? 'Edit' : 'Save' }}</app-button>
				<app-upload-image [imgSrc]="dog.imageSrc" [isSmall]="true" (formData)="this.uploadDogImage($event, dog)"></app-upload-image>
				<span>{{ dog.name }} - {{ dog.breed }}</span>
				<br /><br />
			</div>
		</div>
		<app-button class="add-dog" [isSmall]="true" (onClick)="newDog = !newDog">Add new dog</app-button>
	</div>
	<div *ngIf="editDog || newDog" class="dog-container">
		<div class="form-container">
			<form [formGroup]="dogForm" (ngSubmit)="onDogSubmit()">
				<label for="name">Name:</label>
				<input type="text" id="name" formControlName="name" required />

				<label for="breed">Breed:</label>
				<input type="text" id="breed" formControlName="breed" required />

				<label for="birthday">Birthday:</label>
				<input type="date" id="birthday" formControlName="birthdate" required />
				<div class="radio-wrapper">
					<label>Gender:</label>
					<label><input type="radio" formControlName="sex" value="male" /> Male</label>
					<label><input type="radio" formControlName="sex" value="female" /> Female</label>
				</div>
				<div class="checkbox-wrapper">
					<label> <input type="checkbox" formControlName="isServiceDog" /> Service Dog </label>
				</div>
				<button type="submit" [disabled]="dogForm.invalid">Submit</button>
			</form>
		</div>
	</div>
	<div *ngIf="userDogs.length === 0 && !newDog" class="dog-container">
		<app-button [isSmall]="true" (onClick)="newDog = !newDog">Add new dog</app-button>
	</div>
	<div *ngIf="loading" class="spinner">
		<app-spinner></app-spinner>
	</div>
</div>
